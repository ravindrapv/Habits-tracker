{"ast":null,"code":"var _jsxFileName = \"/home/venkataravindrapv/blog-app-master/src/components/signup.js\";\nimport React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\nimport validate from \"../utils/validate\";\nimport Loading from \"./loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Signup extends React.Component {\n  constructor() {\n    super();\n    this.handleInput = _ref => {\n      let {\n        target\n      } = _ref;\n      let {\n        name,\n        value\n      } = target;\n      let errors = this.state.errors;\n      validate(errors, name, value);\n      this.setState({\n        errors,\n        [name]: value\n      });\n    };\n    this.checkInput = () => {\n      if (!this.state.username || !this.state.password || !this.state.email) {\n        this.setState({\n          errors: {\n            email: \"required email/password/username\"\n          }\n        });\n      }\n    };\n    this.signUp = () => {\n      fetch(`${baseurl}/api/users`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user: {\n            username: `${this.state.username}`,\n            email: `${this.state.email}`,\n            password: `${this.state.password}`\n          }\n        })\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(_ref2 => {\n            let {\n              errors\n            } = _ref2;\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      }).then(user => {\n        localStorage.setItem(\"userToken\", JSON.stringify(user.user.token));\n        this.props.handleLogIn(user.user);\n        this.props.history.push(\"/\");\n      }).catch(errors => {\n        this.setState({\n          errors,\n          loading: false\n        });\n      });\n    };\n    this.state = {\n      username: null,\n      email: null,\n      password: null,\n      loading: false,\n      errors: {\n        username: null,\n        email: null,\n        password: null\n      }\n    };\n  }\n  render() {\n    let {\n      password,\n      email,\n      username\n    } = this.state.errors;\n    let {\n      Password,\n      Email,\n      Username\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login flex-col p-12 flex justify-center items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl p-2 blue\",\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-500 text-lg\",\n            children: \"Already have an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/login\",\n            className: \"text-blue-900 text-xl underline px-2\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex flex-col\",\n          onSubmit: event => {\n            event.preventDefault();\n            this.checkInput();\n            this.setState({\n              loading: true\n            });\n            this.signUp();\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-red-500\",\n            children: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Email\",\n            onChange: this.handleInput,\n            className: \"text-xl rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",\n            type: \"text\",\n            name: \"email\",\n            value: Email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-red-500\",\n            children: password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Password\",\n            onChange: this.handleInput,\n            type: \"password\",\n            name: \"password\",\n            value: Password,\n            className: \"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-red-500\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Enter Username\",\n            onChange: this.handleInput,\n            className: \"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",\n            type: \"text\",\n            name: \"username\",\n            value: Username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: ` text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid  ${!this.state.email || !this.state.password || !this.state.username ? \"border-red-500 text-red-500 bg-red-200\" : \"border-green-700 text-green-700 bg-green-200\"}`,\n            type: \"submit\",\n            value: \"Sign up\",\n            disabled: email || password || username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  }\n}\nexport default _c = withRouter(Signup);\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","NavLink","withRouter","baseurl","validate","Loading","Signup","Component","constructor","handleInput","target","name","value","errors","state","setState","checkInput","username","password","email","signUp","fetch","method","headers","body","JSON","stringify","user","then","res","ok","json","Promise","reject","localStorage","setItem","token","props","handleLogIn","history","push","catch","loading","render","Password","Email","Username","event","preventDefault"],"sources":["/home/venkataravindrapv/blog-app-master/src/components/signup.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\nimport validate from \"../utils/validate\";\nimport Loading from \"./loading\";\n\nclass Signup extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      username: null,\n      email: null,\n      password: null,\n      loading: false,\n      errors: {\n        username: null,\n        email: null,\n        password: null,\n      },\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    let errors = this.state.errors;\n    validate(errors, name, value);\n    this.setState({\n      errors,\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    if (!this.state.username || !this.state.password || !this.state.email) {\n      this.setState({\n        errors: {\n          email: \"required email/password/username\",\n        },\n      });\n    }\n  };\n  signUp = () => {\n    fetch(`${baseurl}/api/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: `${this.state.username}`,\n          email: `${this.state.email}`,\n          password: `${this.state.password}`,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      })\n      .then((user) => {\n        localStorage.setItem(\"userToken\", JSON.stringify(user.user.token));\n        this.props.handleLogIn(user.user);\n        this.props.history.push(\"/\");\n      })\n      .catch((errors) => {\n        this.setState({ errors, loading: false });\n      });\n  };\n  render() {\n    let { password, email, username } = this.state.errors;\n    let { Password, Email, Username } = this.state;\n    return (\n      <>\n        {this.state.loading ? (\n          <div className=\"h-screen flex items-center justify-center\">\n            <Loading />\n          </div>\n        ) : (\n          <div className=\"login flex-col p-12 flex justify-center items-center\">\n            <h2 className=\"text-2xl p-2 blue\">Sign up</h2>\n            <div className=\"flex flex-row\">\n              <p className=\"text-green-500 text-lg\">Already have an account?</p>\n              <NavLink\n                to=\"/login\"\n                className={\"text-blue-900 text-xl underline px-2\"}\n              >\n                Login\n              </NavLink>\n            </div>\n            <form\n              className=\"flex flex-col\"\n              onSubmit={(event) => {\n                event.preventDefault();\n                this.checkInput();\n                this.setState({\n                  loading: true,\n                });\n                this.signUp();\n              }}\n            >\n              <span className=\"text-xs text-red-500\">{email}</span>\n              <input\n                placeholder=\"Enter Email\"\n                onChange={this.handleInput}\n                className=\"text-xl rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n                type=\"text\"\n                name=\"email\"\n                value={Email}\n              ></input>\n              <span className=\"text-xs text-red-500\">{password}</span>\n              <input\n                placeholder=\"Enter Password\"\n                onChange={this.handleInput}\n                type=\"password\"\n                name=\"password\"\n                value={Password}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n              ></input>\n              <span className=\"text-xs text-red-500\">{username}</span>\n              <input\n                placeholder=\"Enter Username\"\n                onChange={this.handleInput}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n                type=\"text\"\n                name=\"username\"\n                value={Username}\n              ></input>\n              <input\n                className={` text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid  ${\n                  !this.state.email ||\n                  !this.state.password ||\n                  !this.state.username\n                    ? \"border-red-500 text-red-500 bg-red-200\"\n                    : \"border-green-700 text-green-700 bg-green-200\"\n                }`}\n                type=\"submit\"\n                value=\"Sign up\"\n                disabled={email || password || username}\n              ></input>\n            </form>\n          </div>\n        )}\n      </>\n    );\n  }\n}\nexport default withRouter(Signup);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}